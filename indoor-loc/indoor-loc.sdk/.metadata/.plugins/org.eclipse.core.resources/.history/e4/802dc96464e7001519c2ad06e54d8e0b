/*
 * uwb.c: UWB Control
 * Author: Stephanie Kunkel
 */





/*
 * Global Variables
 */
XGpio uwbGpio;

/*
 * Function Prototypes
 */
int ssTwrInit(void);
int ssTwrResp(void);
int txWait(void);
int rxWait(void);
int simpleTx(void);
int simpleRx(void);

void reset_DW1000(void)
{
    u32 uwbIn;
    XGpio_Initialize(&uwbGpio,XPAR_AXI_GPIO_UWB_DEVICE_ID);
    XGpio_DiscreteWrite(&uwbGpio,1,0); // reset on
    uwbIn = XGpio_DiscreteRead(&uwbGpio,2);
    /*
	printf("UBW reset active. Inputs 0x%x. Press any key\r\n", uwbIn);
	getchar();
	*/
    XGpio_DiscreteWrite(&uwbGpio,1,0xff); // reset off
    uwbIn = XGpio_DiscreteRead(&uwbGpio,2);
    while(0 == (uwbIn & 0x4)){
		//printf("UBW reset inactive. Inputs 0x%x\r\n", uwbIn);
	    uwbIn = XGpio_DiscreteRead(&uwbGpio,2);
    }
	printf("UBW reset completed\r\n");

    deca_sleep(2);
}
